+++
title = "an express and nodejs CSV importer service"
date = "2025-11-08T01:15:41-04:00"
description = "jcrs csv"
draft = true
toc = false
categories = ["technology"]
tags = ["nodejs", "javascript", "REST api"]
+++

jp2 remediator
JCRS csv importer
At the beginning of the year I worked on a Python project for Harvard University, the library system has a mega digital repository, with some corrupted JPEG2000 images.
At the time of this writing and hopefully for ever and ever, all tests pass with 100% coverage.

![jp2_remediator tests](../../images/jp2tests.jpg "jp2_remediator tests")

The module is a command line service, it reads the bytes of a jp2 file or directory of files or an input S3 bucket, then 
looks for presence of an 'ICC profile' in the jp2 bytestream,
maps and validates curv values according to the ISO/IEC 15444-1:2019 (E) and ICC.1:2022 Specifications
corrects values where the rTRC/gTRC/bTRC tag size in the Tag table structure (ICC.1:2022 Table 24 tag size) is not the same as the count value (gamma, where n == 1) in the curveType encoding (ICC.1:2022 Table 35, n value)
flag and (optionally) log values where the count value n != 1 for future review
later used in apache airflow workflow for all images in the repository

used hex fiend to investigate
calculate positions
the spec was super interesting to work through